<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waiting - MADS MATCHUPS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>

        /* Title styling */
        h1 {
            font-size: 2.8rem;
            color: #d90429;
            text-shadow: 3px 3px 0px #000, 5px 5px 2px rgba(0, 0, 0, 0.7);
            font-weight: bold;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Waiting message styling */
        p {
            font-size: 1.2rem;
            color: #fff;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Gradient styled button */
        .enter-button {
            padding: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #ff0000, #ffcc00);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;}

            <script>
                let intervalId;
            
                function joinQueue() {
                    fetch('/join_queue')
                        .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                document.querySelector('p').textContent = "Waiting for an opponent...";
                                intervalId = setInterval(checkForGame, 5000);  // Poll every 5 seconds
                            } else {
                                alert("Failed to join the queue. Please try again.");
                            }
                        })
                        .catch(error => {
                            console.error("Error joining queue:", error);
                        });
                }
            
                function checkForGame() {
                    fetch('/check_for_game')
                        .then(response => response.json())
                        .then(data => {
                            if (data.game_id) {
                                clearInterval(intervalId);  // Stop polling
                                window.location.href = /game/${data.game_id};  // Redirect to the game page
                            }
                        })
                        .catch(error => {
                            console.error("Error checking for game:", error);
                        });
                }
            </script> 